<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>网络参数管控者 DHCP服务 | 河南省商务中等职业学校</title><meta name="keywords" content="Centos8,DHCP,鸟哥的Linux私房菜"><meta name="author" content="网络搭建竞赛组"><meta name="copyright" content="网络搭建竞赛组"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="想象两种情况：   如果你在工作单位使用的是笔记本电脑，而且常常要带着你的笔记本电脑到处跑， 那么你会发现，哇！ 我的网络卡参数要常常修改啊！而且， 每到一个新的地方，就得问清楚该地的网络参数才行！真是麻烦。  你的公司常常有访客或贵客来临，因为他们也带来笔电，所以也得常常跑来 找你问网络参数才能设定他的计算机。哇！这两种情况都会让你想哭哭吧？这个时候，动态主机设定协议(DHCP)可就大大的派上">
<meta property="og:type" content="article">
<meta property="og:title" content="网络参数管控者 DHCP服务">
<meta property="og:url" content="https://www.hnswxx.cn/2021/11/15/dhcp-server/index.html">
<meta property="og:site_name" content="河南省商务中等职业学校">
<meta property="og:description" content="想象两种情况：   如果你在工作单位使用的是笔记本电脑，而且常常要带着你的笔记本电脑到处跑， 那么你会发现，哇！ 我的网络卡参数要常常修改啊！而且， 每到一个新的地方，就得问清楚该地的网络参数才行！真是麻烦。  你的公司常常有访客或贵客来临，因为他们也带来笔电，所以也得常常跑来 找你问网络参数才能设定他的计算机。哇！这两种情况都会让你想哭哭吧？这个时候，动态主机设定协议(DHCP)可就大大的派上">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://z3.ax1x.com/2021/11/15/I2w5kQ.png">
<meta property="article:published_time" content="2021-11-15T08:32:39.000Z">
<meta property="article:modified_time" content="2021-11-15T10:50:34.680Z">
<meta property="article:author" content="网络搭建竞赛组">
<meta property="article:tag" content="Centos8">
<meta property="article:tag" content="DHCP">
<meta property="article:tag" content="鸟哥的Linux私房菜">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://z3.ax1x.com/2021/11/15/I2w5kQ.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.hnswxx.cn/2021/11/15/dhcp-server/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//s4.cnzz.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?40bf17b5c158004f1b79add895b85851";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" data-pjax="data-pjax" src="https://s4.cnzz.com/z_stat.php?id=1280585001&amp;web_id=1280585001"></script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '网络参数管控者 DHCP服务',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-11-15 18:50:34'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/icon.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="河南省商务中等职业学校" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://z3.ax1x.com/2021/11/13/IybhP1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">28</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 档案</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://720yun.com/t/74vkshrmriy?scene_id=50147975"><i class="fa-fw fas fa-video"></i><span> 学校VR</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw fa fa-heart"></i><span> 电影</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我们</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://z3.ax1x.com/2021/11/15/I2w5kQ.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">河南省商务中等职业学校</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 档案</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://720yun.com/t/74vkshrmriy?scene_id=50147975"><i class="fa-fw fas fa-video"></i><span> 学校VR</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw fa fa-heart"></i><span> 电影</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我们</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">网络参数管控者 DHCP服务</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-11-15T08:32:39.000Z" title="发表于 2021-11-15 16:32:39">2021-11-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-11-15T10:50:34.680Z" title="更新于 2021-11-15 18:50:34">2021-11-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="网络参数管控者 DHCP服务"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
<p>想象两种情况：</p>
</blockquote>
<ol>
<li>如果你在工作单位使用的是笔记本电脑，而且常常要带着你的笔记本电脑到处跑， 那么你会发现，哇！ 我的网络卡参数要常常修改啊！而且， 每到一个新的地方，就得问清楚该地的网络参数才行！真是麻烦。 </li>
<li>你的公司常常有访客或贵客来临，因为他们也带来笔电，所以也得常常跑来</li>
<li>找你问网络参数才能设定他的计算机。哇！这两种情况都会让你想哭哭吧？这个时候，动态主机设定协议(DHCP)可就大大的派上用场啦！DHCP这个服务可以自动的分配IP与相关的网络参数给客户端，来提供客户端自动以服务器提供的参数来设定他们的网络。如此一来，使用者只要将自己的笔电设定好经由DHCP协议来取得网络参数后，一插上网络线，呵呵！马上就可以享受Internet的服务啦！很方便吧！所以得来瞧一瞧这个好用的协定喔！</li>
</ol>
<h3 id="DHCP-运作的原理"><a href="#DHCP-运作的原理" class="headerlink" title="DHCP 运作的原理"></a>DHCP 运作的原理</h3><p>在正式的进入DHCP(DynamicHostConfigurationProtocol)服务器设定之前，我们先来认识一下DHCP这个协议吧！还有，需要了解的是，我们是否『一定』得设定DHCP这个服务器呢？这里都需要厘清一下概念喔！</p>
<h4 id="DHCP-服务器的用途"><a href="#DHCP-服务器的用途" class="headerlink" title="DHCP 服务器的用途"></a>DHCP 服务器的用途</h4><p>在开始DHCP的说明之前，我们先来复习一下之前在网络基础里面提到的几个网络参数吧！要设定好一个网络的环境，使计算机可以顺利的连上Internet，那么你的计算机里面一定要有底下几个网络的参数才行，分别是：</p>
<table>
<thead>
<tr>
<th>IP</th>
<th>netmask</th>
<th>network</th>
<th>broadcast</th>
<th>gateway</th>
<th>DNS IP</th>
</tr>
</thead>
</table>
<p>其中，那个IP netmask network broadcast 与 gateway都可以在</p>
<p>/etc/sysconfig/network-scripts/ifcfg-eth[0-n] 这档案里面设定，DNS 服务器的地址则是在 /etc/resolv.conf 里头设定。只要这几个项目设定正确，那么计算机应该就没问题的可以上网了！所以说，你家里面的3,4部计算机，你都可以手动的来设定好你所需要的网络参数，然后利用NAT服务器的功能，就可以大摇大摆的连上Internet了！真是不错^_^，不是吗？</p>
<ol>
<li>直接每一部计算机都让你登门拜访手动的去设定好？ </li>
<li>将所有的学生都集合起来，然后精神训话…..喔不！是直接教导一下怎么 设定？还是 </li>
<li>藉由一部主机来自动的分配所有的网络参数给宿舍内的任何一部计算机？ 这三种解决方案所需要的时间都不相同，如果你选择的是(1)，那么鸟哥个人认为， 你不是工作狂就是疯掉了， 因为所要花费的时间与你所得的薪水与付出的心力是完全 不成比例的。如果选择是(2)，那么很可能你会被挂上独裁者、 没良心的管理员的称号！ 如果是选择(3)呢？恭喜你！这个方案的管理时间花费最短，也是最不麻烦的作法啦！ 呵呵！知道鸟哥要说些什么了吗？是的！这个 DHCP (Dynamic Host Configuration Protocol) 服务器最主要的工作，就是在进行上面的第三个方案，也就是自动的将网络 参数正确的分配给网域中的每部计算机， 让客户端的计算机可以在开机的时候就立即 自动的设定好网络的参数值，这些参数值可以包括了 IP、netmask、network、gateway 与 DNS 的地址等等。如此一来，身为管理员的你，只要注意到这一部提供网络参数的 主机有没有挂掉就好了， 其他同学们的个人计算机，哈！你想都不必想要怎么去帮忙！ 因为 DHCP 主机已经完全都帮你搞定啦！ ^_^！ 阿！当管理员最大的幸福就是可以喝 喝茶、聊聊天就能控管好一切的网络问题呢！</li>
</ol>
<h4 id="DHCP-协议的运作方式"><a href="#DHCP-协议的运作方式" class="headerlink" title="DHCP 协议的运作方式"></a>DHCP 协议的运作方式</h4><p>你必需要知道的是，DHCP通常是用于局域网络内的一个通讯协议，他主要藉由客户端传送广播封包给整个物理网段内的所有主机，若局域网络内有DHCP服务器时，才会响应客户端的IP参数要求。所以啰，DHCP服务器与客户端是应该要在同一个物理网段内的。至于整个DHCP封包在服务器与客户端的来来回回情况有点像底下这样：</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/I2rPcn"><img src="https://z3.ax1x.com/2021/11/15/I2rPcn.png" alt="I2rPcn.png"></a></p>
<blockquote>
<p>客户端取得 IP 参数的程序可以简化如下：</p>
</blockquote>
<ol>
<li><p>客户端：利用广播封包发送搜索 DHCP 服务器的封包： 若客户端网络设定使用 DHCP 协议取得 IP (在 Windows 内为『自动取得 IP』)， 则当客户端开机或者是重新启动网络卡时， 客户端主机会发送出搜寻 DHCP 服 务器的 UDP 封包给所有物理网段内的计算机。此封包的目标 IP 会是 255.255.255.255， 所以一般主机接收到这个封包后会直接予以丢弃，但若局域 网络内有 DHCP 服务器时，则会开始进行后续行为。 </p>
</li>
<li><p>服务器端：提供客户端网络相关的租约以供选择： DHCP 服务器在接收到这个客户端的要求后，会针对这个客户端的硬件地址 (MAC) 与本身的设定数据来进行下列工作：</p>
<ul>
<li><p>到服务器的登录文件中寻找该用户之前是否曾经用过某个 IP ，若有且该 IP 目前无人使用，则提供此 IP 给客户端；</p>
</li>
<li><p>若配置文件针对该 MAC 提供额外的固定 IP (static IP) 时，则提供该固定 IP 给客户端；</p>
</li>
<li><p>若不符合上述两个条件，则随机取用目前没有被使用的 IP 参数给客户端，并记录下来。</p>
</li>
</ul>
</li>
</ol>
<p>​        总之，服务器端会针对客户端的要求提供一组网络参数租约给客户端选择，由于此时客户端尚未有 IP ，因此        服务器端响应的封包信息中， 主要是针对客户端此时客户端尚未有 IP ，因此服务器端响应的封包信息中，         主要是针对客户端</p>
<ol start="3">
<li><p>客户端：决定选择的DHCP服务器提供的网络参数租约并回报服务器：由于局域网络内可能并非仅有一部DHCP服务器，但客户端仅能接受一组网络参数的租约。因此客户端必需要选择是否要认可该服务器提供的相关网络参数的租约。当决定好使用此服务器的网络参数租约后，客户端便开始使用这组网络参数来设定自己的网络环境。此外，客户端也会发送一个广播封包给所有物理网段内的主机，告知已经接受该服务器的租约。此时若有第二台以上的DHCP服务器，则这些没有被接受的服务器会收回该IP租约。至于被接受的DHCP服务器会继续进行底下的动作。</p>
</li>
<li><p>服务器端：记录该次租约行为并回报客户端已确认的响应封包信息：当服务器端收到客户端的确认选择后，服务器会回传确认的响应封包，并且告知客户端这个网络参数租约的期限，并且开始租约计时喔！那么该次租约何时会到期而被解约(真可怕的字眼)？你可以这样想：</p>
</li>
</ol>
<ul>
<li><p>客户端脱机：不论是关闭网络接口(ifdown)、重新启动(reboot)、关机(shutdown)等行为，皆算是脱机状态，这个时候Server端就会将该IP回收，并放到Server自己的备用区中，等待未来的使用；</p>
</li>
<li><p>客户端租约到期：前面提到DHCPserver端发放的IP有使用的期限，客户端使用这个IP到达期限规定的时间，而且没有重新提出DHCP的申请时，就需要将IP缴回去！这个时候就会造成断线。但用户也可以再向 DHCP 服务器要求再次分配 IP 啰。</p>
</li>
</ul>
<p>以上就是DHCP这个协议在Server端与Client端的运作状态，由上面这个运作状态来看，我们可以晓得，只要Server端设定没有问题，加上Server与Client在硬件联机上面确定是OK的，那么Client就可以直接藉由Server来取得上网的网络参数，当然啦，只要我们这些管理员能够好好的、正确的管理好我们的DHCP服务器，嘿嘿！那么上网的设定自然就变成一件很简单的事情啦！不过，关于上述的流程还是有一些需要额外说明的啦：</p>
<blockquote>
<p>DHCP服务器给予客户端的IP参数为固定或动态：</p>
</blockquote>
<p>在上面的步骤里面，注意到第二步骤了吗？就是服务器会去比较客户端的MAC硬件地址，并判断该MAC是否需要给予一个固定的IP呢！所以啦，我们可以设定DHCP服务器给予客户端的IP参数主要有两种：</p>
<ul>
<li><p>固定 (Static) IP：</p>
<p>只要那个客户端计算机的网络卡不换掉，那么 MAC 肯定就不会改变，由于 DHCP 可以根据 MAC 来给予固定的 IP 参数租约，所以该计算机每次都能以一个固定 的 IP 连上 Internet ！呵呵！ 这种情况比较适合当这部客户端计算机需要用 来做为提供区域内的一些网络服务的主机之用 (所以 IP 要固定)。那么如何在 Linux 上面知道网络卡的 MAC 呢？很简单啦！有很多的方式，最简单的方式就 是使用 ifconfig 及 arp 来进行：</p>
<ul>
<li><p>观察自己的 MAC 可用 ifconfig：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># ifconfig | grep HW</span></span><br><span class="line">eth0 Link encap:Ethernet HWaddr 08:00:27:71:85:BD</span><br><span class="line">eth1 Link encap:Ethernet HWaddr 08:00:27:2A:30:14</span><br><span class="line"><span class="comment"># 因为鸟哥有两张网卡，所以有两个硬件地址喔！</span></span><br></pre></td></tr></table></figure></li>
<li><p>观察别人的 MAC 可用 ping 配合 arp</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># ping -c 3 192.168.1.254</span></span><br><span class="line">[root@www ~]<span class="comment"># arp -n</span></span><br><span class="line">Address HWtype HWaddress Flags Mask Iface</span><br><span class="line">192.168.1.254 ether 00:0c:6e:85:d5:69 C eth0</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>动态 (dynamic) IP：</p>
<p>Client 端每次连上 DHCP 服务器所取得的 IP 都不是固定的！都直接经由 DHCP 所随机由尚未被使用的 IP 中提供！除非你的局域网络内的计算机有可能用来做为主机之用，所以必需要设定成为固定 IP ，否则使用动态 IP 的设定比较简单，而且使用上面具有较佳的弹性。怎么说呢？ 假如你是一个 ISP 好了，而你只申请到 150 个 IP 来做为你的客户联机之用。那么你是否真的只能邀集到 150 的使用者？呵呵！当然不啰！我可以邀集 200 个使用者以上呢！</p>
<p>为什么？这样想好了，我今天开了一家餐馆，里面只有20个座位，那么是否我一餐只能卖给20个人呢？当然不是啦！因为客人是人来人往的，有人先吃有人后吃，所以同样是20个座位，但是可以有40个人来吃我的简餐，因为来的时间不一样嘛！了解了吗？呵呵！对啦！你这个ISP虽然只有150个IP可以发放，但是因为你的使用者并非24小时都挂在在线的，所以你可以将这150个IP做良好的分配，让200个人来『轮流使用』这150个IP哩！</p>
</li>
</ul>
<p><strong>Tips</strong>:</p>
<p>其实IP只有PublicIP与PrivateIP两种，中文翻译成『公共IP』与『私有IP』这两个，至于其他所谓的『静态IP』、『实体IP』、『虚拟IP』、『浮动式IP』等等，都是藉由一些IP取得的方式来分类的，关于IP的种类我们在网络基础中谈过了，记得再好好的厘清一下观念喔！事实上现在主流的ADSL宽带拨接上网也有使用到『静态IP』与『固定IP』之类的概念喔！举例来说好了，hinet/seednet等主要ISP都有提供所谓的：『一个固定IP搭配7~8个浮动IP』的ADSL拨接功能，也就是说同样透过一条电话线拨接到ISP，但是其中一个拨接是可以取得固定的IP呢！而其他的则是非固定的IP，DHCP的static/dynamic跟这个玩意儿有点类似啦！^_^</p>
<blockquote>
<p>关于租约所造成的问题与租约期限：</p>
</blockquote>
<p>怪了！如果我们观察上面DHCP运作模式的第四个步骤，你会发现最后DHCP服务器还会给予一个租约期限！干嘛还要这样的一个期限呢？其实设定期限还是有个优点啦！最大的优点就是可以避免IP被某些使用者一直占用着，但该使用者却是Idle(发呆)的状态！</p>
<p>举个例子来说，我们刚刚不是说到，我有150个IP，但是偏偏我有200个用户吗？我们以2010年的世界杯足球赛来说明好了。假设每个使用者都急着上网知道世足赛的消息，那么某些热门对战时段网络将可能达到使用尖峰！也就是说，这200个人同时要来使用这150个IP，有可能吗？当然不可能！肯定会有50个人无法联机，因为『很抱歉！目前系统正在忙线中，请你稍后再拨！』</p>
<p>那怎么办？这个时候租约到期的方式就很有用处啦！那几个已经联机进来很久的人，就会因为租约到期而被迫脱机，这个时候该IP就会被释放出来，哈哈！大家赶快抢呀！先抢到先赢喔！所以，那50个人(包括被迫脱机的那个朋友)只好继续的、努力的、加油的来进行DHCP的要求啰！^_^””虽然说是优点，但是其实如果站在使用者的角度来看，还是可能会造成公愤的！凭什么大家一起交钱，我先联机进来就需要先被踢出去？～呵呵！所以啰，如果要当ISP，</p>
<p>还是得要先规划好服务的方针才行呦！这样你可以了解租约到期的行为了吗？！^_^既然有租约时间，那么是否代表我用DHCP取得的IP就得要『手动』的在某个时间点去重新取得新的IP呢？不需要的啦！因为目前的DHCP客户端程序大多会主动的依据租约时间去重新申请IP(renew)的！也就是说在租约到期前你的DHCP客户端程序就已经又重新申请更新租约时间了。所以除非DHCP主机挂点，否则你所取得的IP应该是可以一直使用下去的！</p>
<p><strong>Tips</strong>: </p>
<p>一般来说，假设租约期限是T小时，那么客户端在0.5T会主动向DHCP服务器发出重新要求网络参数的封包。如果这次封包要求没有成功，那么在0.875T后还会再次的发送封包一次。正因如此，所以服务器端会启动port67监听用户要求，而用户会启动port68主动向服务器要求哩！鸟哥觉得这是很特殊的一件事呢！</p>
<blockquote>
<p>多部 DHCP 服务器在同一物理网段的情况</p>
</blockquote>
<p>或许你曾经发现过一件事情，那就是当我的网域里面有两部以上的DHCP服务器时，到底哪一部服务器会提供我的这部客户端计算机所发出的DHCP要求？呵呵！很抱歉，俺也不晓得！因为在网络上面，很多时候都是『先抢先赢』的，DHCP的回应也是如此！当Server1先响应时，你使用的就是Server1所提供的网络参数内容，如果是Server2先响应，你就是使用Server2的参数来设定你的客户端PC！不过，前提之下当然是这些计算机的『物理联机』都是在一起的啊！</p>
<p>因为这个特色的关系，所以当你在练习DHCP服务器的设定之前，不要在已经正常运作的区网下测试，否则会很惨。举个鸟哥的例子来说好了，某一次其他系的研究生在测试网络安全时，在原有的区网上面放了一部IP分享器，结果你猜怎么着？整栋大楼的网络都不通了！因为那时整栋大楼的网络是串接在一起的，而我们学校是使用DHCP让客户端上网。由于IP分享器的设定并不能连上Internet，哇！大家都无法上网了啦！那你晓得了吗？不要随便测试啦这个DHCP服务器！</p>
<h4 id="何时需要架设-DHCP-服务器"><a href="#何时需要架设-DHCP-服务器" class="headerlink" title="何时需要架设 DHCP 服务器"></a>何时需要架设 DHCP 服务器</h4><p>既然DHCP的好处是『免客户端设定』，而且对于行动装置的上网方面非常的方便！那么是否代表你就得要架设一部DHCP呢？那可不一定！接下来要告知大家的是几个概念性的问题，你倒不一定『必需』遵守底下的一些概念呢！反正，自己的网域自己『爽』就好啦！</p>
<blockquote>
<p>使用 DHCP 的几个时机</p>
</blockquote>
<p>在某些情况之下，倒是强烈的建议架设DHCP主机的！什么情况呢？例如：</p>
<ul>
<li><p>具有相当多行动装置的场合：</p>
<p>例如你的公司内部很多笔记本电脑使用的场合！因为这种笔电本身就是移动性的装置，如果每到一个地方都要去问人家『喂！你这边的网络参数是什么？』还得要担心是否会跟人家的IP相冲突等等的问题！这个时候，DHCP可就是你的救星啰！</p>
</li>
<li><p>区域内计算机数量相当的多时：</p>
<p>另外一个情况就是你所负责的网域内计算机数量相当庞大时，大到你没有办法一个一个的进行说明来设定他们自己的网络参数，这个时候为了省麻烦，还是架设DHCP来的方便吶！况且，维护一部你熟悉的DHCP主机，要比造访几十个不懂计算机的人要简单的多哩！^_^</p>
</li>
</ul>
<blockquote>
<p>不建议使用 DHCP 主机的时机</p>
</blockquote>
<p>虽然DHCP有很多好处，但是你有没有发现一个步骤怪怪的呀！回头看一下那个步骤一，客户端在开机的时候会主动的发送讯息给网域上的所有机器，这个时候，如果网域上就是没有DHCP主机呢？很抱歉，那么你的这部客户端计算机，『仍然会持续的发送讯息！』真正的时间与次数不晓得会有多久，不过，肯定会超过30秒以上，甚至可以达到一分钟以上！哇！那么这段时间你能干嘛？呵呵！除了等、还是等！所以啰，如果计算机数不多，还是使用手动的方式来设定一下就好了！方便嘛！</p>
<ul>
<li><p>在你网域内的计算机，有很多机器其实是做为主机的用途，很少用户需求， 那么似乎就没有必要架设 DHCP </p>
</li>
<li><p>更极端的情况是，像一般家里，只有 3 ~ 4 部计算机，这个时候，架设 DHCP 只能拿来练练功力，事实上，并没有多大的效益；</p>
</li>
<li><p>当你管理的网域当中，大多网络卡都属于老旧的型号，并不支持 DHCP 的协议时；</p>
</li>
<li><p>很多用户的信息知识都很高，那么也没有需要架设 DHCP 啦。</p>
</li>
</ul>
<p>如前所述，上面的都是概念性的说法，事实上，一件事情的解决之道是有很多的方案的，没有所谓的『完全正确』的方案，只有『相对可行、并且符合经济效益与功能』的方案！所以啰，架设任何网站之前，请先多评估评估吶！</p>
<h3 id="DHCP-服务器端的设定"><a href="#DHCP-服务器端的设定" class="headerlink" title="DHCP 服务器端的设定"></a>DHCP 服务器端的设定</h3><p>事实上，目前市面上的 IP 分享器已经便宜到爆了！而 IP 分享器本身就含有 DHCP的功能。 所以如果你只是想要单纯的使用 DHCP 在你的局域网络当中而已，那么建议你直接购买一部 IP 分享器来使用即可， 因为至少它很省电。如果你还有其他考虑的话，才来架设 DHCP 吧！底下我们以一个简单的范例来架设 DHCP 先。</p>
<h4 id="所需软件与档案结构"><a href="#所需软件与档案结构" class="headerlink" title="所需软件与档案结构"></a>所需软件与档案结构</h4><p>DHCP的软件需求很简单，就是只要服务器端软件即可，在CentOS6.x上面，这个软件的名称就是dhcp啰！如果是默认安装，那么这个软件是不会安装的，请自行使用yum去装好这个软件吧！安装完毕之后，你可以使用『rpm-ql dhcp』来看看这个软件提供了哪些档案，基本上，比较重要的档案数据如下：</p>
<ul>
<li><p>/etc/dhcp/dhcpd.conf</p>
<p>这个就是 dhcp 服务器的主要配置文件咯！在某些 Linux 版本上头这个档案可能不存在，所以如果你确定有安装 dhcp 软件却找不到这个档案时，请手动自行建立它即可。</p>
<blockquote>
<p><strong>Tips</strong>: </p>
<p>其实 dhcp 软件在释出的时候都会附上一个范例档案，你可以使用 『 rpm -ql dhcp 』来查询到 dhcpd.conf.sample 这个范例档案， 然后将该档案复制成为 /etc/dhcp/dhcpd.conf 后，再手动去修改即可，这样设定比较容易啦！</p>
</blockquote>
</li>
<li><p>/usr/sbin/dhcpd</p>
<p>启动整个 dhcp daemon 的执行档啊！其实最详细的执行方式应该要使用『 man dhcpd 』来查阅一番的呢！^_^</p>
</li>
<li><p>/var/lib/dhcp/dhcpd.leases</p>
<p>这档案颇有趣的！我们前面原理部分不是有提到『租约』吗？DHCP服务器端与客户端租约建立的启始与到期日就是记录在这个档案当中的咯！就跟你说很简单吧！整个软件数据也不过才如此而已呢！</p>
</li>
</ul>
<h4 id="主要配置文件-etc-dhcp-dhcpd-conf-的语法"><a href="#主要配置文件-etc-dhcp-dhcpd-conf-的语法" class="headerlink" title="主要配置文件 /etc/dhcp/dhcpd.conf 的语法"></a>主要配置文件 /etc/dhcp/dhcpd.conf 的语法</h4><p>在 CentOS 5.x 以前，这个档案都被放置到 /etc/dhcpd.conf 的，新版的才放置于此处。其实 DHCP 的设定很简单啊，只要将 dhcpd.conf 设定好就可以启动了。不过编辑这个档案时你必须要留意底下的规范：</p>
<p>『 # 』为批注符号；除了右括号 “)” 后面之外，其他的每一行设定最后都要以『 ; 』做为结尾！ 重要！</p>
<p>设定项目语法主要为：『 &lt;参数代号&gt; &lt;设定内容&gt; 』，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">default-lease-time 259200;</span><br></pre></td></tr></table></figure>

<p>某些设定项目必须以 option 来设定，基本方式为『 option &lt;参数代码&gt; &lt; 设定内容&gt; 』例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">option domain-name <span class="string">&quot;your.domain.name&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>基本上，我们刚刚前面提过说，DHCP的IP分配可分为给予动态IP与固定IP，其中又需要了解的是，如果需要设定固定IP的话，那么就必须要知道要设定成固定IP的那部计算机的硬件地址(MAC)才行，请使用arp或ifconfig来查知你的接口的MAC吧！好了，那么需要设定的项目有哪些呢？其实dhcpd.conf里头的设定主要分为两大项目，一个是服务器运作的整体设定(Global)一个是IP设定模式(动态或固定)，每个项目的设定值大概有底下这几项</p>
<blockquote>
<p>整体设定 (Global) </p>
</blockquote>
<p>假设你的 dhcpd 只管理一个区段的区网，那么除了 IP 之外的许多网络参数就可 以放在整体设定的区域中，这包括有租约期限、DNS 主机的 IP 地址、路由器的 IP 地址还有动态 DNS (DDNS) 更新的类型等等。当固定 IP 及动态 IP 内没有规范到某些设 定时，则以整体设定值为准。这些参数的设定名称为：</p>
<ul>
<li><p>default-lease-time 时间：</p>
<p>用户的计算机也能够要求一段特定长度的租约时间，但若使用者没有特别要求租约时间的话， 那么就以此为预设的租约时间。后面的时间参数默认单位为秒；</p>
</li>
<li><p>max-lease-time 时间：</p>
<p>与上面的预设租约时间类似，不过，这个设定值是在规范使用者所能要求的最大租约时间。也就是说， 使用者要求的租约时间若超过此设定值，则以此值为准；</p>
</li>
<li><p>option domain-name “领域名”：</p>
<p>如果你在/etc/resolv.conf里面设定了一个『search google.com』的话，这表示当你要搜寻主机名时，DNS系统会主动帮你加上这个领域名的意思。</p>
</li>
<li><p>option domain-name-servers IP1, IP2： </p>
<p>这个设定参数可以修改客户端的 /etc/resolv.conf 档案！就是 nameserver 后 面接的那个 DNS IP 啰！特别注意设定参数最末尾为『servers』 (有 s 喔)；</p>
</li>
<li><p>ddns-update-style 类型：、</p>
<p>因为DHCP客户端所取得的IP通常是一直变动的，所以某部主机的主机名与IP的对应就很难处理。此时DHCP可以透过ddns来更新主机名与IP的对应。不过我们这里不谈这么复杂的东西，所以你可以将他设定为none喔。</p>
</li>
<li><p>ignore client-updates：</p>
<p>与上一个设定值较相关，客户端可以透过dhcpd服务器来更新DNS相关的信息。不过，这里我们也先不谈这个，因此就将它设定为ignore(忽略)了。</p>
</li>
<li><p>option routers 路由器的地址： </p>
<p>设定路由器的 IP 所在，记得那个『 routers 』要加 s 才对！</p>
</li>
</ul>
<blockquote>
<p>IP 设定模式 (动态或固定)</p>
</blockquote>
<p>由于dhcpd主要是针对局域网络来给予IP参数的，因此在设定IP之前，我们得要指定一个区网才行。指定区网的方式使用如下的参数：subnet NETWORK_IP netmask NETMASK_IP{…}我们知道区网要给予network/netmaskIP这两个参数才行，例如之前谈过的：192.168.100.0/255.255.255.0这样的设定值。上头设定值当中，subnet与<br>netmask是关键词，而大写部分就填上你的区网参数啰。那在括号内还有什么参数需要设定的？那就是到底IP是固定的还是动态的设定啊：</p>
<ul>
<li><p>range IP1 IP2：<br>在这个区网当中，给予一个连续的IP群用来发放成动态IP的设定，那个IP1 IP2指的是开放的IP范围。举例来说，你想要开放192.168.100.101到192.168.100.200这100个IP用来作为动态分配，那就是：range<br>192.168.100.101192.168.100.200;</p>
</li>
<li><p>host 主机名 { … };</p>
<p>这个 host 就是指定固定 IP 对应到固定 MAC 的设定值，那个主机名可以自己想想再给予即可。 不过在大括号内就得要指定 MAC 与固定的 IP 啰！那这两个设定值怎么设定呢？看看底下啰：</p>
<ul>
<li><p>hardware ethernet 硬件地址：</p>
<p>利用网络卡上面的固定硬件地址来设定，亦即该设定仅针对这个硬件地址 有效的意思；</p>
</li>
<li><p> fixed-address IP 地址：</p>
</li>
</ul>
<p>  给予一个固定的 IP 地址的意思。 说再多也没有什么用啦！让我们实际来玩一个案例吧！你就知道该如何处理了。</p>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">网络搭建竞赛组</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.hnswxx.cn/2021/11/15/dhcp-server/">https://www.hnswxx.cn/2021/11/15/dhcp-server/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.hnswxx.cn" target="_blank">河南省商务中等职业学校</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Centos8/">Centos8</a><a class="post-meta__tags" href="/tags/DHCP/">DHCP</a><a class="post-meta__tags" href="/tags/%E9%B8%9F%E5%93%A5%E7%9A%84Linux%E7%A7%81%E6%88%BF%E8%8F%9C/">鸟哥的Linux私房菜</a></div><div class="post_share"><div class="social-share" data-image="https://z3.ax1x.com/2021/11/15/I2w5kQ.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/11/15/keepalived-principle/"><img class="prev-cover" src="https://z3.ax1x.com/2021/11/15/IRF8LF.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Keepalived原理</div></div></a></div><div class="next-post pull-right"><a href="/2021/11/13/mail-server-postfix/"><img class="next-cover" src="https://z3.ax1x.com/2021/11/13/IyRoJe.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">邮件服务器 Postfix</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/11/11/centos8-certification-authority/" title="Centos8-证书颁发机构"><img class="cover" src="https://z3.ax1x.com/2021/11/11/I0KJm9.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-11</div><div class="title">Centos8-证书颁发机构</div></div></a></div><div><a href="/2021/12/10/centos8-gateway-server/" title="centos8网关服务器（防火墙的nat转换）"><img class="cover" src="https://s1.ax1x.com/2021/12/10/oImbp4.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-10</div><div class="title">centos8网关服务器（防火墙的nat转换）</div></div></a></div><div><a href="/2021/11/23/dns-forward-and-reverse-resolution/" title="Linux-DNS正反向解析"><img class="cover" src="https://z3.ax1x.com/2021/11/23/ophkHP.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-23</div><div class="title">Linux-DNS正反向解析</div></div></a></div><div><a href="/2021/11/19/kdc-nfs-linkage/" title="Kerberos与NFS联动"><img class="cover" src="https://z3.ax1x.com/2021/11/19/I7z7dK.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-19</div><div class="title">Kerberos与NFS联动</div></div></a></div><div><a href="/2021/11/24/linux-dns-secondary-server/" title="从属LinuxDNS服务器"><img class="cover" src="https://z3.ax1x.com/2021/11/24/oiIpuD.png###" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-24</div><div class="title">从属LinuxDNS服务器</div></div></a></div><div><a href="/2021/12/10/mariadb-master-slave-replication/" title="MariaDB 主从复制"><img class="cover" src="https://s1.ax1x.com/2021/12/10/o4qZfH.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-10</div><div class="title">MariaDB 主从复制</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="cols"><div class="col"><div class="container"><div class="front avatarPanel"><div class="inner"><div class="player-title">网络搭建</div><div class="player-avatar"><img src="https://z3.ax1x.com/2021/11/13/IybhP1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div></div></div><div class="back attributesPanel"><div class="inner"><div class="player-lv">LV.3</div><div class="player-name">网络搭建竞赛组</div><div class="attributes-value"><div class="attributes-value-item"><a href="/archives/"><div class="attributes">文章</div><div class="value-bar"><div class="value-bar-fill" style="width:28.00%"><div class="value-bar-fill-in" style="background: rgba(89, 230, 54,0.6)"></div></div></div><span>28/100</span></a></div><div class="attributes-value-item"><a href="/tags/"><div class="attributes">标签</div><div class="value-bar"><div class="value-bar-fill" style="width:23.00%"><div class="value-bar-fill-in" style="background: rgba(224, 20, 20, 0.6)"></div></div></div><span>23/100</span></a></div><div class="attributes-value-item"><a href="/categories/"><div class="attributes">分类</div><div class="value-bar"><div class="value-bar-fill" style="width:2.00%"><div class="value-bar-fill-in" style="background: rgba(30, 97, 226, 0.6)"></div></div></div><span>2/100</span></a></div></div></div></div></div></div><div class="col"><div class="container"><div class="front descriptionPanel"><div class="inner"><div class="player_description"><b>劳动光荣<br>技能宝贵<br>德技并修<br>知行合一</b></div><div class="play-bottom"></div></div></div><div class="back buttonPanel"><div class="inner"><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://jq.qq.com/?_wv=1027&amp;k=wTQefzUT"><i class="fab fa-edge"></i><span>加入网络爱好者群聊</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="tencent://message/?uin=1692565761&amp;Site=&amp;Menu=yes" target="_blank" title="qq"><i class="iconfont icon-qq"></i></a><a class="social-icon" href="https://user.qzone.qq.com/1692565761/main" target="_blank" title="qzone"><i class="iconfont icon-qzone"></i></a><a class="social-icon" href="https://z3.ax1x.com/2021/11/15/I2Ulod.jpg" target="_blank" title="wechat"><i class="iconfont icon-wechat"></i></a><a class="social-icon" href="https://github.com/1692565761" target="_blank" title="github"><i class="iconfont icon-github"></i></a></div><div class="play-bottom"></div></div></div></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content"><a href="https://www.hnswxx.com/a/dangjianzhuanti/dangshijiaoyu/" target="_blank"><img width="100%" src="https://z3.ax1x.com/2021/11/13/IyHHNn.png" height="90"></a><a href="http://www.hnswxx.com/plus/list.php?tid=88" target="_blank"><img src="https://z3.ax1x.com/2021/11/13/IyHxuF.png" alt="img"  height="90" width="100%"></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#DHCP-%E8%BF%90%E4%BD%9C%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">DHCP 运作的原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DHCP-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E7%94%A8%E9%80%94"><span class="toc-number">1.1.</span> <span class="toc-text">DHCP 服务器的用途</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DHCP-%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%BF%90%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.</span> <span class="toc-text">DHCP 协议的运作方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E9%9C%80%E8%A6%81%E6%9E%B6%E8%AE%BE-DHCP-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.3.</span> <span class="toc-text">何时需要架设 DHCP 服务器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DHCP-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E7%9A%84%E8%AE%BE%E5%AE%9A"><span class="toc-number">2.</span> <span class="toc-text">DHCP 服务器端的设定</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%80%E9%9C%80%E8%BD%AF%E4%BB%B6%E4%B8%8E%E6%A1%A3%E6%A1%88%E7%BB%93%E6%9E%84"><span class="toc-number">2.1.</span> <span class="toc-text">所需软件与档案结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-etc-dhcp-dhcpd-conf-%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">2.2.</span> <span class="toc-text">主要配置文件 &#x2F;etc&#x2F;dhcp&#x2F;dhcpd.conf 的语法</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/02/10/debian11-cryptsetup/" title="debian11_cryptsetup分区加密"><img src="https://s2.loli.net/2022/02/10/zUMQT71luKqRHjB.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="debian11_cryptsetup分区加密"/></a><div class="content"><a class="title" href="/2022/02/10/debian11-cryptsetup/" title="debian11_cryptsetup分区加密">debian11_cryptsetup分区加密</a><time datetime="2022-02-10T08:47:39.000Z" title="发表于 2022-02-10 16:47:39">2022-02-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/17/windows-iis-php/" title="WindowsServer2019下IIS+PHP配置教程"><img src="https://s4.ax1x.com/2021/12/17/TFk1C8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="WindowsServer2019下IIS+PHP配置教程"/></a><div class="content"><a class="title" href="/2021/12/17/windows-iis-php/" title="WindowsServer2019下IIS+PHP配置教程">WindowsServer2019下IIS+PHP配置教程</a><time datetime="2021-12-17T04:36:10.000Z" title="发表于 2021-12-17 12:36:10">2021-12-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/17/php-thread-safe-difference/" title="PHP版本Non Thread Safe和Thread Safe如何选择？区别是什么？"><img src="https://s4.ax1x.com/2021/12/17/TiLPbQ.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PHP版本Non Thread Safe和Thread Safe如何选择？区别是什么？"/></a><div class="content"><a class="title" href="/2021/12/17/php-thread-safe-difference/" title="PHP版本Non Thread Safe和Thread Safe如何选择？区别是什么？">PHP版本Non Thread Safe和Thread Safe如何选择？区别是什么？</a><time datetime="2021-12-17T03:03:38.000Z" title="发表于 2021-12-17 11:03:38">2021-12-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/15/ipadair_downgrade/" title="记录一次IPAD  air降级ios10.3.3的全部过程"><img src="https://s4.ax1x.com/2021/12/15/ozS9B9.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="记录一次IPAD  air降级ios10.3.3的全部过程"/></a><div class="content"><a class="title" href="/2021/12/15/ipadair_downgrade/" title="记录一次IPAD  air降级ios10.3.3的全部过程">记录一次IPAD  air降级ios10.3.3的全部过程</a><time datetime="2021-12-14T16:51:24.000Z" title="发表于 2021-12-15 00:51:24">2021-12-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/11/ldap-basic-configuration/" title="ldap基础配置与案例"><img src="https://s4.ax1x.com/2021/12/11/o7qMIx.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ldap基础配置与案例"/></a><div class="content"><a class="title" href="/2021/12/11/ldap-basic-configuration/" title="ldap基础配置与案例">ldap基础配置与案例</a><time datetime="2021-12-11T12:35:16.000Z" title="发表于 2021-12-11 20:35:16">2021-12-11</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By 网络搭建竞赛组</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><p><a style="margin-inline:5px"target="_blank" href="https://hexo.io/"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为 Hexo" alt="HEXO"></a><a style="margin-inline:5px"target="_blank" href="https://butterfly.js.org/"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用 Butterfly" alt="Butterfly"></a><a style="margin-inline:5px"target="_blank" href="https://www.jsdelivr.com/"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用 Jsdelivr 为静态资源提供CDN加速" alt="Jsdelivr"></a><a style="margin-inline:5px"target="_blank" href="https://github.com/"><img src="https://img.shields.io/badge/Source-vercel-d021d6?style=flat&logo=vercel" title="本站项目由 vercel 托管" alt="vercel"></a><a style="margin-inline:5px"target="_blank"href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" alt="img" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script async src="//at.alicdn.com/t/font_2264842_3izu8i5eoc2.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="false" data-text="劳动光荣,技能宝贵,创造伟大,德技并修,知行合一" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start -->
  <script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.16/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://python-github-calendar-api.vercel.app/api?1692565761";
            var git_color =['#ebedf0', '#fdcdec', '#fc9bd9', '#fa6ac5', '#f838b2', '#f5089f', '#c4067e', '#92055e', '#540336', '#48022f', '#30021f'];
            var git_user ="1692565761";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log('已挂载github calendar')
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style>undefined</style><!-- hexo injector body_end end --></body></html>